<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link href="https://fonts.googleapis.com/css?family=Poppins&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#"><img src="images/logo.png" alt="logo" /> We Media</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#">Movies <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">TV</a>
                </li>

                <li class="nav-item active">
                    <a class="nav-link" href="#">Sports</a>
                </li>
            </ul>
            <div class="nav-item search">
                <input type="text">
                <img src="images/search.png">
            </div>
            <div class="nav-item drop">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img src="./images/user-image.png">
                    Johny
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="#">Logout</a>
                </div>
            </div>
        </div>
    </nav>
    <div class="container-fluid">
        <div class="row">

            <div class="owl-carousel">
                <div class="item" style="background-image: url('./images/New-Zealand-Women.jpg')">
                    <div class="content">

                        <h2>Highlights: Oz Seal Semis Berth</h2>
                        <p>Beth Mooney's well compiled 60 off 50 balls powered Australia to a 4-run victory against New Zealand in the ICC Women's T20 World Cup 2020</p>
                        <a href="#" class="modal-open"><img src="./images/watch.png" class="watch"/> Watch Now</a>
                    </div>
                </div>
                <div class="item" style="background-image: url('./images/Capture.PNG')">
                    <div class="content">

                        <h2>NZ vs Ind: TestLive Match</h2>
                        <p>Find out how the players are doing in the Test series between New Zealand and India</p>
                        <a href="#" class="modal-open live"><img src="./images/live-watch.png" class="watch"/> Watch Now (Live)</a>
                    </div>
                </div>
                <div class="item" style="background-image: url('./images/Badminton.jpg')">
                    <div class="content">

                        <h2>Highlights: Jayaram Bows out in SF</h2>
                        <p>India's Ajay Jayaram went down fighting to Thailand's Kunlavut Vitidsarn 20-22 12-22 in the semifinals of the Barcelona Spain Masters 2020</p>
                        <a href="#" class="modal-open"><img src="./images/watch.png" class="watch"/> Watch Now</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid custom-container card-list">
        <div class="row">
            <div class="col-md-3 col-12 col-sm-6 col-lg-3">
                <div class="card">
                    <img src="images/card-image.jpg" alt="card-image">
                    <div class="card-body">
                        <div class="text-center">
                            <img src="images/playIcon.png"  class="modal-open">
                        </div>
                        <h3>Running Mile</h3>
                        <p>I trained 8 weeks to run a 5 minute mile. Here's how it went</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-12 col-sm-6 col-lg-3">
                <div class="card">
                    <img src="images/Mask%20Group%206.png" alt="card-image">
                    <div class="card-body">
                        <div class="text-center">
                            <img src="images/playIcon.png" class="modal-open">
                        </div>
                        <h3>Live: India vs. New Zeland</h3>
                        <p>Find out how the players are doing in the Test <br/> series</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-12 col-sm-6 col-lg-3">
                <div class="card">
                    <img src="images/Mask%20Group%205.png" alt="card-image">
                    <div class="card-body">
                        <div class="text-center">
                            <img src="images/playIcon.png" class="modal-open">
                        </div>
                        <h3>Performance of the year</h3>
                        <p>Star raider Pawan's haul with a record-breaking performance.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-12 col-sm-6 col-lg-3">
                <div class="card">
                    <img src="images/Group%2023.png" alt="card-image">
                    <div class="card-body">
                        <div class="text-center">
                            <img src="images/playIcon.png" class="modal-open">
                        </div>
                        <h3>Watford 3-0 Liverpool</h3>
                        <p>Liverpool's dreams of an unbeaten Premier League 2019/20 season ...</p>
                    </div>
                </div>
            </div>            <div class="col-md-3 col-12 col-sm-6 col-lg-3">
                <div class="card">
                    <img src="images/card-image.jpg" alt="card-image">
                    <div class="card-body">
                        <div class="text-center">
                            <img src="images/playIcon.png"  class="modal-open">
                        </div>
                        <h3>Running Mile</h3>
                        <p>I trained 8 weeks to run a 5 minute mile. Here's how it went</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-12 col-sm-6 col-lg-3">
                <div class="card">
                    <img src="images/Mask%20Group%206.png" alt="card-image">
                    <div class="card-body">
                        <div class="text-center">
                            <img src="images/playIcon.png" class="modal-open">
                        </div>
                        <h3>Live: India vs. New Zeland</h3>
                        <p>Find out how the players are doing in the Test <br/> series</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-12 col-sm-6 col-lg-3">
                <div class="card">
                    <img src="images/Mask%20Group%205.png" alt="card-image">
                    <div class="card-body">
                        <div class="text-center">
                            <img src="images/playIcon.png" class="modal-open">
                        </div>
                        <h3>Performance of the year</h3>
                        <p>Star raider Pawan's haul with a record-breaking performance.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-12 col-sm-6 col-lg-3">
                <div class="card">
                    <img src="images/Group%2023.png" alt="card-image">
                    <div class="card-body">
                        <div class="text-center">
                            <img src="images/playIcon.png" class="modal-open">
                        </div>
                        <h3>Watford 3-0 Liverpool</h3>
                        <p>Liverpool's dreams of an unbeaten Premier League 2019/20 season ...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" data-backdrop="static" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
            <div class="modal-content">
                <div class="ads">
                <div class="left"></div>                <div class="bottom">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-9">
                            
                    <h2>NIKE AIR ZOOM <sub>Mens Running Shoe</sub></h2>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent id egestas justo. Vivamus ac ex at ligula convallis gravida. Quisque bibendum tristique neque ut laoreet. In non enim mollis, elementum nibh eget, consequat magna. In hac habitasse platea dictumst. Pellentesque auctor vitae lectus eu lobortis. </p>
                    <h2>$190</h2>
                            </div>
                            <div class="col-md-3 d-flex align-items-center justify-content-center">
                                <button class="btn btn-primary">Shop Now</button>
                            </div>
                        </div>
                    </div>
                    </div>

                </div>
                <div class="modal-body">
                    
                    <button type="button" class="close video-full-screen">
                        <span aria-hidden="true"><img src="./images/full-screen.png" /></span>
                    </button>
                    <button type="button" class="close modal-close">
                        <span aria-hidden="true"><img src="./images/close.png" /></span>
                    </button>
                    <div class="suggestion-generated">
                        <h3>Segements Generated</h3>
                        <ul>
                        </ul>
                        
                        <a><img src="./images/left-arrow.png"/></a>
                    </div>
                    <div class="suggestion-generated added">
                        <h3>Segements Added</h3>
                        <ul>
                        </ul>
                        <a><img src="./images/right-arrow.png"/></a>
                    </div>
                    <video id="video">
                        <source  src="./video/JustForFun.mp4" type="video/mp4">
                    </video>
                    <div class="seek" style="color: #fff">
                        <i></i>
                        <div id="custom-seekbar">

                            <span></span>

                        </div>
                        <i></i>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/script.js"></script>
    <script>
        var vid = document.getElementById("video");
        function modalClose() {
            $("#exampleModal").modal('hide');
            vid.pause();
        }
        
        $('.modal-close').on('click', function() {
            $(".modal-content").removeClass('ad-display')
            modalClose();
        })
        function modalOpen() {
            $(".modal-content").removeClass('ad-display')
            $.ajax({
                url: './json/dummy.json',
                error: function(data) {
                    // var response = JSON.parse(data.responseText);
                    $('#exampleModal').modal('show');
                    var data = {
                        url: './video/JustForFun.mp4',
                        products: [{
                            url: 'https://www.google.com',
                            title: 'Title 2',
                            description: 'Product Description',
                            image: './images/product-image.png',
                            startSecond: 10,
                            endSecond: 25
                        }, {
                            url: 'https://www.google.com',
                            title: 'Title 3',
                            description: 'Product Description',
                            image: './images/Mask Group 16.png',
                            startSecond: 20,
                            endSecond: 25
                        }, {
                            url: 'https://www.google.com',
                            title: 'Title 4',
                            description: 'Product Description',
                            image: './images/Mask Group 17.png',
                            startSecond: 20,
                            endSecond: 25
                        },{
                            url: 'https://www.google.com',
                            title: 'Title 5',
                            description: 'Product Description',
                            image: './images/Mask Group 18.png',
                            startSecond: 30,
                            endSecond: 40
                        }]
                    };
                    vid.src =  data.url;
                    vid.play();
                    vid.ontimeupdate = function() {
                        var percentage = (vid.currentTime / vid.duration) * 100;
                        $("#custom-seekbar span").css("width", percentage + "%");
                        $('.seek i:first-of-type').text(timeUpdate(vid.currentTime));
                        var currentTime= Math.round(vid.currentTime,1);
                        var oldTime = 0;
                        if(oldTime==currentTime){
                            return;
                        }
                        oldTime=currentTime;
                        var items= data.products.filter(function(item) {
                            return currentTime >= item.startSecond  && currentTime <= item.endSecond;
                        });
                        if(percentage >=80) {
                           $(".modal-content").addClass('ad-display');
                           } else {
                                                          $(".modal-content").removeClass('ad-display')

                           }
                        updateSuggestion(items)
                    };
                    vid.oncanplay = function() {
                        $('.seek i:last-of-type').text(timeUpdate(vid.duration));
                        vid.play();
                    }

                    vid.oncanplay();
                }
            })

        }

        function timeUpdate(seconds) {
            var secs = Math.round(seconds);
            var hours = Math.floor(seconds / (60 * 60));
            var divisor_for_minutes = seconds % (60 * 60);
            var minutes = Math.floor(divisor_for_minutes / 60);
            var divisor_for_seconds = divisor_for_minutes % 60;
            var seconds = Math.ceil(divisor_for_seconds);
            if (hours < 10) {
                hours = '0' + hours;
            }
            if (minutes < 10) {
                minutes = '0' + minutes;
            }
            if (seconds < 10) {
                seconds = '0' + seconds;
            }
            return hours + ":" + minutes + ':' + seconds;
        }
        $("#custom-seekbar").on("click", function(e) {
            var offset = $(this).offset();
            var left = (e.pageX - offset.left);
            var totalWidth = $("#custom-seekbar").width();
            var percentage = (left / totalWidth);
            var vidTime = vid.duration * percentage;
            vid.currentTime = vidTime;
            vid.play();
        });
        $('.modal-open').on('click', function() {
            $(".modal-content").removeClass('ad-display')
            modalOpen();
        })
        function updateSuggestion(data){
            var html = '';
            $.each(data, function(index, value) {
            html += '<a href="'+value.url+'" target="_blank"><li><img src="'+value.image+'" /><div class="content"><h4>'+value.title+'</h4><p>'+value.description+'</p></div></li></a>'
                
            });
       
       $(".suggestion-generated:not(.added) > ul").html(html);
            if(data.length!==0) {
               
       $(".suggestion-generated.added > ul").html(html);
               }
    }
        $('.owl-carousel').owlCarousel({
            stagePadding: 100,
            loop: true,
            margin: 10,
            nav: true,
            autoplay:true,
    autoplayTimeout:2000,
            responsive: {
                0: {
                    items: 1
                },
                600: {
                    items: 1
                },
                1000: {
                    items: 1
                }
            }
        });
        $('.video-full-screen').on('click', toggleFullScreen);
        function toggleFullScreen() {
            if (vid.requestFullScreen) {
                vid.requestFullScreen();
            } else if (vid.webkitRequestFullScreen) {
                vid.webkitRequestFullScreen();
            } else if (vid.mozRequestFullScreen) {
                vid.mozRequestFullScreen();
            }
        }
        
        $('.suggestion-generated > a').on('click', function() {
            
            $(this).closest('.suggestion-generated').toggleClass('show');
        })
    </script>
</body>

</html>